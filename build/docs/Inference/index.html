<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Inference" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Inference | What works</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/docs/Inference"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Inference | What works"><meta data-rh="true" name="description" content="Speed and Performance:"><meta data-rh="true" property="og:description" content="Speed and Performance:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/docs/Inference"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/Inference" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/Inference" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.264bfde1.css">
<script src="/assets/js/runtime~main.9d58e25b.js" defer="defer"></script>
<script src="/assets/js/main.f281da62.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Documenation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Conclusions">SAM2 Video</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/TheCleverIdiott/Segment-Anything" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Conclusions">Conclusions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/Inference">Inference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Model Setup">Model Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Ongoing Research">Ongoing Research</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Pipeline">Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/SAM2 on Images">SAM2 on Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Usable Result">Usable Result</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Results from SAM Video Testing</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Inference</span><meta itemprop="position" content="1"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Inference</h1></header><p><strong>Speed and Performance:</strong></p>
<p><strong>Discussion on Model Sizes:</strong></p>
<p>The impact of using different sizes of the Segment Anything Model v2 (SAM v2) on the speed and performance of video processing. The three model sizes discussed were large, small, and tiny. Each model varies in the number of parameters, which directly influences both memory consumption and processing speed.</p>
<p><strong>Large Model (225 Million Parameters):</strong></p>
<p>The large model was the first to be tested. During video segmentation, it was observed that this model achieved approximately 8 frames per second (FPS) when processing a video on an L4 GPU, including input/output (I/O) operations such as saving the segmented frames.<br>
<!-- -->The host noted that when I/O operations were removed from the equation, the large model&#x27;s FPS increased to around 12-20 FPS. This highlights the significant overhead that I/O operations can introduce, especially when saving or loading data from storage.</p>
<p><strong>Tiny Model:</strong></p>
<p>The tiny model, significantly smaller in parameter size, was then tested. The initial FPS observed during the segmentation process was around 17-18 FPS with I/O operations included.<br>
<!-- -->To further optimize performance, the host enabled the &#x27;compile image encoder&#x27; feature. This feature is designed to optimize the encoding process, theoretically improving the model&#x27;s processing speed. After enabling this feature, the FPS increased to around 20-23 FPS.</p>
<p>The FPS improvement was noted to be modest, approximately 2-3 FPS higher than before enabling the encoder. However, this was still not close to the 44 FPS claimed by some official benchmarks, indicating potential differences in the testing environments or additional optimizations not explored during the stream.</p>
<p><strong>Key Observations:</strong></p>
<p>The memory usage for the large model was approximately 5 GB on the GPU. This memory usage increased with the number of frames and model parameters, which is critical for real-time applications.<br>
<!-- -->The FPS measurement included both the processing time and the overhead of I/O operations, meaning that pure model inference speed was likely higher than reported if separated from these operations.<br>
<!-- -->Potential for Further Optimization:</p>
<p>Further optimization, such as bypassing I/O operations altogether or using more efficient data handling methods, could significantly improve processing speed.<br>
<!-- -->There was also discussion about the potential to run SAM v2 in real-time video streams by modifying the model&#x27;s implementation to process frames directly from memory without intermediate storage steps.</p>
<p><strong>Quality of Segmentation:</strong></p>
<p><strong>Comparison Across Models:</strong><br>
<!-- -->comparison of segmentation quality across the large, small, and tiny versions of SAM v2. The main focus was on how well each model could accurately detect and segment objects within a video, particularly under challenging conditions such as occlusions or overlapping objects.<br>
<!-- -->Segmentation Results with the Large Model:</p>
<p>Using the large model, tracked through various frames. The large model demonstrated high accuracy, even in frames where the basketball was partially obscured by another object (e.g., a defender’s hand).<br>
<!-- -->The model successfully separated the ball from overlapping objects, maintaining consistent tracking across frames. This level of precision highlighted the large model&#x27;s ability to handle complex scenes with minimal loss of accuracy.</p>
<p><strong>Segmentation Results with the Tiny Model:</strong></p>
<p>When switching to the tiny model, the host noted that the segmentation quality was surprisingly comparable to the large model. The tiny model managed to maintain similar accuracy, effectively tracking the basketball throughout the video, even in challenging scenarios.<br>
<!-- -->Despite being a significantly smaller model, the tiny version preserved the essential characteristics of the objects being tracked, though there were minor differences in the finer details of the segmentation, particularly in scenes with higher complexity or more objects.</p>
<p><strong>Real-World Application Considerations:</strong></p>
<p>the tiny version in real-world applications, particularly in scenarios requiring real-time processing. The tiny model’s ability to deliver similar quality at a faster speed suggests it could be more suitable for applications where speed is critical, and minor trade-offs in accuracy are acceptable.</p>
<p>potential use of SAM v2 for tracking objects across different camera angles or cuts within a video, a task the model showed promising results in, particularly when tracking highly distinctive objects like a person in a red dress in a crowded scene from &#x27;The Matrix&#x27;. However, when the model was tasked with tracking a less distinctive object, such as another person in the same scene, it struggled to maintain consistency across cuts, indicating that object distinctiveness plays a significant role in segmentation accuracy.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Conclusions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Conclusions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Model Setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Model Setup</div></a></nav></div></div></div></div></main></div></div></div></div>
</body>
</html>